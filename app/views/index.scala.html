@()(implicit app:play.api.Application)

@import play.api.Mode

@main("Pourritures") {
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/chart.css")"/>
    <link rel="stylesheet" type="text/css" href="@routes.Assets.at("stylesheets/tipsy.css")"/>
    <script src="@routes.Assets.at("javascripts/d3.v3"+".min".when(app.mode != Mode.Dev)+".js")"></script>
    <script src="@routes.Assets.at("javascripts/underscore."+"min.".when(app.mode != Mode.Dev)+"js")"></script>
    <script src="@routes.Assets.at("javascripts/jquery.tipsy.js")"></script>
    <script src="@routes.Assets.at("javascripts/charts."+"min.".when(app.mode != Mode.Dev)+"js")"></script>
    <script src="@routes.Assets.at("javascripts/main."+"min.".when(app.mode != Mode.Dev)+"js")"></script>
    <script>
        $(document).scroll(function() {
            $("header").each(function(){
                var bottomPosition = $(document).height(),
                    offset = $(this).offset();
                if (window.scrollY >= 120){
                    $(this).addClass("stick");
                    /*$(this).css("top","-130px");
                    $(".features").css("padding-top","190px");
                    $(".teasing .logo").removeClass("hide");*/

                }else{
                    $(this).removeClass("stick");
                    /*$(".features").css("padding-top","0px");
                    $(".teasing .logo").addClass("hide");*/
                }
            });
        });
    </script>

    <h2>Avant propos</h2>
    <p>Les données proviennent de <a target="_blank" href="http://www.wikistrike.com/article-liste-des-condamnations-et-mises-en-examen-du-ps-du-parti-de-gauche-des-verts-de-l-ump-et-du-fn-116776009.html">Wikistike</a> et de Wikipedia.</p>
    <p>Le jeu de données est incomplet, si vous souhaitez le rendre exhaustif vous pouvez nous contacter sur <a href="https://twitter.com/Pourritures">Twitter</a></p>

    <hr/>
    <h2>Les affaires touchant les élus</h2>
    <figure class="cumulated">
        <svg class="legend">
            <g transform="translate(10,10)">
                <g transform="translate(10,10)">
                    <line x1="0" y1="0" x2="30" y2="0"/>
                    <text dx="40" dy="4">Nombre d'affaires</text>
                </g>
                <g transform="translate(180,10)">
                    <line x1="0" y1="0" x2="40" y2="0"  stroke-dasharray="5,5"  />
                    <text dx="40" dy="4">Nombre d'affaires cumulées</text>
                </g>
            </g>
        </svg>
    </figure>
    <hr/>
    <h2>Les affaires en détail</h2>
    <figure class="pourriture">
        <div class="chart">
            <svg class="legend">
                <g transform="translate(10,10)">
                    <g transform="translate(10,10)">
                        <circle r="10" cy="0" cx="0"></circle>
                        <text dx="20" dy="4">Condamnation</text>
                    </g>
                    <g transform="translate(140,10)">
                        <circle r="10" cy="0" cx="0" stroke-dasharray="5,5"></circle>
                        <text dx="20" dy="4">Mise en examen</text>
                    </g>
                    <g transform="translate(280,10)">
                        <circle r="10" cy="0" cx="0" class="ex"></circle>
                        <text dx="20" dy="4">Radié du groupe</text>
                    </g>
                </g>
            </svg>
        </div>
        <div class="filter-box">
            <input type="search" placeholder="Recherche">
            <a href="">Déselectionner tout</a>
            <ul class="by-name">
            </ul>
        </div>
    </figure>

    <h2>
        <img src="@routes.Assets.at("images/champions.png")" width="419"/>
        Les champions
    </h2>
    <ul class="high-score"></ul>

    <hr/>
    <h2>L'exemplarité, c'est maintenant</h2>
    <p>Interpelons la classe politique et veillons à ce que la "moralisation de la vie politique" soit effective.</p>

    <script type="text/html" id="tooltip-tmpl">
        <div class="tooltip">
            <% if(typeof(gouvernement) != "undefined") { %>
            <div class="ribbon-wrapper"><div class="ribbon">GOUV</div></div>
            <% } %>
            <h3><%= name %></h2>
                <h4><%= nature %></h3>
            <ul>
                <% _.each(raison,function(item,key,list){ %>
                <li><%= item %></li>
                <% }) %>
            </ul>
        </div>
    </script>
    <script type="text/html" id="highscore-tmpl">
        <li class="top-pourriture rank<%= rank %>">
            <img src="/assets/images/<%= formation %>.png" width="120" height="120"/>
            <h3><%= name %></h2>
            <p><span class="nb"><%= condamnations %></span> affaires</p>
            <p><% if(lower != upper) { %>
            entre <%= lower %> et <%= upper %>
            <% } else { %>
            en <%= lower %>
            <% } %>
            </p>
        </li>
    </script>
}
